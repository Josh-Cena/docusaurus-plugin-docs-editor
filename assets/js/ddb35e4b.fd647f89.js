(self.webpackChunkexample=self.webpackChunkexample||[]).push([[669],{6003:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(2137),a=n(7757),c=n.n(a),o=n(7294),u=n(6010),s=n(2263),i=n(4996),l=n(2730),p=n(7386),f=n(6038),d=n(3938),h=n(8399),m=n.n(h),v=n(1647),w=n.n(v),x=n(4802),g=n.n(x),k=n(594),b=n.n(k),E=n(3850),_=n.n(E),Z=n(5355),y=n.n(Z),N=n(150),C=n.n(N),z=n(6656),S=n.n(z),L=n(4338),B=n.n(L),I=n(8867),R=n.n(I),A=n(8173),P=n(9105),U=[1,2,3,4,5,6],H=function(e){var t=e.children;return o.createElement("div",{className:(0,u.Z)("editor__group","padding-horiz--xs")},t)},q=function(e){var t=e.editor,n=e.name,r=e.action,a=e.children;return o.createElement("button",{className:(0,u.Z)("editor__icon","margin-horiz--xs",n&&t.isActive(n)&&"editor__icon--active"),onClick:r},o.createElement("span",{className:"material-icons"},a))};function F(e){var t=e.editor,n=e.save,a=e.submit,s=e.className,i=(0,o.useState)(!1),l=i[0],p=i[1],f=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.chain().focus().run(),p(!0),e.next=4,n();case 4:p(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.chain().focus().run(),p(!0),e.next=4,a();case 4:p(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?o.createElement(o.Fragment,null,o.createElement(P.Z,null,o.createElement("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"})),o.createElement("div",{className:(0,u.Z)("editor__menu","padding-vert--sm",s)},o.createElement(H,null,o.createElement(q,{editor:t,action:function(){return t.chain().focus().undo().run()}},"undo"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().redo().run()}},"redo")),o.createElement(H,null,o.createElement("select",{className:(0,u.Z)("editor__select","margin-horiz--xs"),value:function(){var e=[];t.isActive("paragraph")&&e.push("paragraph");for(var n,r=(0,A.Z)(U);!(n=r()).done;){var a=n.value;t.isActive("heading",{level:a})&&e.push(a.toString())}return 1==e.length?e[0]:""}(),onChange:function(e){e.preventDefault();var n=e.target.value;if("paragraph"==n)t.chain().focus().setParagraph().run();else{var r=parseInt(n);U.includes(r)&&t.chain().focus().toggleHeading({level:r}).run()}}},o.createElement("option",{hidden:!0,disabled:!0,value:""}),o.createElement("option",{value:"paragraph"},"Normal text"),U.map((function(e){return o.createElement("option",{key:e,value:e},"Heading "+e)})))),o.createElement(H,null,o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleBold().run()},name:"bold"},"format_bold"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleItalic().run()},name:"italic"},"format_italic"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleCode().run()},name:"code"},"code")),o.createElement(H,null,o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleBulletList().run()},name:"bulletList"},"format_list_bulleted"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleOrderedList().run()},name:"orderedList"},"format_list_numbered"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleCodeBlock().run()},name:"codeBlock"},"code"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().toggleBlockquote().run()},name:"blockquote"},"format_quote")),o.createElement(H,null,o.createElement(q,{editor:t,action:function(){return t.chain().focus().setHorizontalRule().run()}},"horizontal_rule"),o.createElement(q,{editor:t,action:function(){return t.chain().focus().setHardBreak().run()}},"keyboard_return")),o.createElement(H,null,o.createElement(q,{editor:t,action:function(){return t.chain().focus().unsetAllMarks().clearNodes().run()}},"format_clear")),o.createElement(H,null,o.createElement("button",{className:"editor__button margin-horiz--xs padding-horiz--sm",disabled:l,onClick:f},l?o.createElement("span",{className:"editor__loading material-icons"},"autorenew"):o.createElement("span",{className:"material-icons"},"file_download"),"Save"),o.createElement("button",{className:"editor__button margin-horiz--xs padding-horiz--sm",disabled:l,onClick:d},o.createElement("span",{className:"material-icons"},"file_upload")," Submit")))):null}function j(e){var t=e.editor,n=e.className;return o.createElement("div",{className:(0,u.Z)("editor__page",n),onClick:function(){return t.chain().focus().run()}},o.createElement(l.kg,{editor:t,className:"editor__content"}))}function M(){return null}function O(e){var t=e.options,n=e.className,a=(0,o.useState)(),h=a[0],v=a[1],x=(0,o.useState)(),k=x[0],E=x[1],Z=(0,o.useState)(),N=Z[0],z=Z[1],L=(0,o.useState)(),I=L[0],A=L[1],P=(0,i.Z)("/edit"),U=t.docsPath,H=t.github,q=H.clientId,O=H.tokenUrl,T=(0,s.Z)().siteConfig,D=T.organizationName,G=T.projectName,J=(0,l.jE)({extensions:[p.Z],autofocus:"start"}),K=function(e){var t=new URL("https://github.com/login/oauth/authorize"),n=t.searchParams;n.append("client_id",q),n.append("scope","public_repo"),n.append("redirect_uri",e),window.location.replace(t)},Q=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(t,O),e.next=3,fetch(n).then((function(e){return e.json()})).then((function(e){return e.token}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,a,o,u,s,i,l,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URL(window.location.pathname,window.location.origin),n=new URLSearchParams(window.location.search),!(a=n.get("code"))){e.next=18;break}return window.history.replaceState(window.history.state,"",t),e.next=7,Q(a,t);case 7:return o=e.sent,u=f.v.plugin(d.T),s=new u({auth:o}),i=s.hook,l=s.rest,i.error("request",function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(403!==t.status){e.next=5;break}return e.next=3,V();case 3:e.next=6;break;case 5:throw t;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=13,l.users.getAuthenticated();case 13:return p=e.sent,h=p.data.login,e.abrupt("return",{api:l,user:h});case 18:K(t);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.api.repos.createFork({owner:D,repo:G});case 2:return t=e.sent,n=t.data,r=n.name,a=n.owner.login,e.next=8,new Promise((function(e,t){var n=setInterval((function(){I.api.repos.get({owner:a,repo:r}).then((function(t){clearInterval(n),e(t)})).catch((function(e){404!==e.status&&t(e)}))}),1e3)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,a,o,u,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.api.repos.get({owner:t,repo:n});case 3:r=e.sent,e.next=15;break;case 6:if(e.prev=6,e.t0=e.catch(0),404!==e.t0.status||t===D){e.next=14;break}return e.next=11,W();case 11:r=e.sent,e.next=15;break;case 14:throw e.t0;case 15:if(a=r.data,o=a.name,u=a.owner.login,s=a.parent,u===D){e.next=24;break}if(!s){e.next=23;break}if(i=s.name,s.owner.login===D||i===G){e.next=21;break}throw"Repo is not a fork of "+D+"/"+G;case 21:e.next=24;break;case 23:throw"Repo is not a fork of "+D+"/"+G;case 24:return e.abrupt("return",{owner:u,repo:o});case 25:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,r.Z)(c().mark((function e(t,n,r){var a,o,u,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.api.repos.get({owner:D,repo:G});case 2:return a=e.sent,o=a.data.default_branch,e.next=6,I.api.repos.getBranch({owner:D,repo:G,branch:o});case 6:return u=e.sent,s=u.data.commit.sha,e.next=10,I.api.git.createRef({owner:t,repo:n,sha:s,ref:"refs/heads/"+r});case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$=function(){var e=(0,r.Z)(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.api.repos.getBranch({owner:t,repo:n,branch:r});case 3:e.next=13;break;case 5:if(e.prev=5,e.t0=e.catch(0),404!==e.t0.status){e.next=12;break}return e.next=10,Y(t,n,r);case 10:e.next=13;break;case 12:throw e.t0;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ee=function(){var e=(0,r.Z)(c().mark((function e(t,n,r,a){var o,u,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.api.repos.getContent({owner:t,repo:n,path:a,ref:"refs/heads/"+r});case 2:return o=e.sent,u=o.data.content,s=atob(u),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),te=function(){var e=(0,r.Z)(c().mark((function e(t,n,r,a,o){var u,s,i,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.api.repos.getContent({owner:t,repo:n,path:a,ref:"refs/heads/"+r});case 2:if(u=e.sent,s=u.data,i=s.sha,l=s.content,(p=btoa(o)).trim()===l.trim()){e.next=12;break}return e.next=10,I.api.repos.createOrUpdateFileContents({owner:t,repo:n,branch:r,path:a,sha:i,content:p,message:"Edit "+k});case 10:return e.next=12,new Promise((function(e,c){var o=setInterval((function(){I.api.repos.getContent({owner:t,repo:n,path:a,ref:"refs/heads/"+r}).then((function(t){t.data.sha!=i&&(clearInterval(o),e())})).catch((function(e){404!==e.status&&c(e)}))}),1e3)}));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),ne=function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,a,o,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+":"+n,e.next=3,I.api.pulls.list({owner:D,repo:G,state:"open",head:r});case 3:if(a=e.sent,a.data.length){e.next=12;break}return e.next=8,I.api.repos.get({owner:D,repo:G});case 8:return o=e.sent,u=o.data.default_branch,e.next=12,I.api.pulls.create({owner:D,repo:G,base:u,head:r,title:"Edit "+k});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=B()().use(w()).use(g()).use(b()),ae=B()().use(_()).use(y(),["yaml"]).use(C(),{yaml:R().parse}).use(S()).use(m()),ce=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J.getHTML(),e.next=3,re.process(t);case 3:return n=e.sent,r=n.contents,h&&(a=R().stringify(h),r="---\n"+a+"---\n\n"+r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.process(t);case 2:n=e.sent,r=n.data,a=n.contents,v(r),J.chain().setContent(a).focus("start").run();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t=e.sent,n=window.location.pathname.slice(P.length),a="edit/"+(r=""+U+n+".md").replaceAll(/[\/\.]/g,"-"),A(t),z(a),E(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(I.user,G);case 2:return t=e.sent,n=t.owner,r=t.repo,e.next=7,$(n,r,N);case 7:return a=e.sent,e.next=10,ee(n,r,a,k);case 10:return o=e.sent,e.next=13,oe(o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:return t=e.sent,e.next=5,X(I.user,G);case 5:return n=e.sent,r=n.owner,a=n.repo,e.next=10,$(r,a,N);case 10:return o=e.sent,e.next=13,te(r,a,o,k,t);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:return t=e.sent,e.next=5,X(I.user,G);case 5:return n=e.sent,r=n.owner,a=n.repo,e.next=10,$(r,a,N);case 10:return o=e.sent,e.next=13,te(r,a,o,k,t);case 13:return e.next=15,ne(r,o);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){ue()}),[]),(0,o.useEffect)((function(){I&&N&&k&&se()}),[I,N,k]),o.createElement(o.Fragment,null,I?o.createElement("div",{className:(0,u.Z)("editor",n)},o.createElement(F,{editor:J,save:ie,submit:le}),o.createElement(j,{editor:J})):o.createElement(M,null))}}}]);